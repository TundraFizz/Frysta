<style>

html {
  font: 14px/24px "lato", sans-serif;
  background-color: #33363f;
  /*DARKER: #272a31 */
  color: #c0c0c0;
}

body {
  margin: 0;
}

#buttons {
}

.btn {
  position: relative;
  width: 100px;
  height: 32px;
  background-color: darkgray;
  color: black;
  border: 1px solid black;
  cursor: pointer;
  text-align: center;
  line-height: 32px;
  display: inline-block;
}
.btn:active {
  background-color: lightgray;
}

.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

#btn-screenshot {
}

#titlebar {
  -webkit-user-select: none;
  -webkit-app-region: drag;
  height: 18px;
  border: solid black;
  border-width: 0px 0px 1px 0px;
  box-shadow: 0px 0px 6px 0px #5fb9ff;
}

#title-text {
  position: relative;
  top: -3px;
  left: 4px;
  height: 18px;
  font-size: 12px;
  font-weight: bold;
}

#titlebar > div {
  display: inline-block;
}

#titlebar > .button {
  -webkit-app-region: no-drag;
  width: 22px;
  height: 18px;
  float: right;
  cursor: pointer;
}

#btn-minimize {
  background-color: #3336c8;
}

#btn-minimize:hover {
  background-color: #3336e1;
}

#btn-minimize:active {
  background-color: #3336fa;
}

#btn-quit {
  background-color: #c8363f;
}

#btn-quit:hover {
  background-color: #e1363f;
}

#btn-quit:active {
  background-color: #fa363f;
}

#lioca {
  cursor: default;
}

#menu-buttons {
  width: 100%;
  font-size: 0px;
  height: 30px;
  display: table;
}

.menu-button {
  display: inline-block;
  width: 50%;
  font-size: 16px;
  text-align: center;
  display: table-cell;
  vertical-align: middle;
}

.menu-button[active="true"] {
  text-shadow: 0px 0px 8px #5fff79;
}

.menu-button[active="false"] {
  cursor: pointer;
  /*color: rgba(0, 0, 0, 0.4);*/
}

.menu-button[active="false"]:hover {
  cursor: pointer;
  /*color: rgba(0, 0, 0, 0.7);*/
}

#menu-line-bg {
  background-color: black;
  height: 1px;
}

#menu-line-fg {
  position: relative;
  background-color: #c0c0c0;
  height: 1px;
  width: 50%;
  left: 0%;
}

#input-field-container {
  position: relative;
  width: 100%;
  height: 82px;
}

#input-field-email {
  top: 4px;
  visibility: hidden;
  opacity: 0;
}

#input-field-username {
  top: 14px;
}

#input-field-password {
  top: 48px;
}

.input-field {
  position: absolute;
  width: 50%;
  left: 25%;
}

.input-label {
  position: absolute;
  left: 6px;
  color: rgba(0, 0, 0, 0.7);
  pointer-events: none;
  height: 100%;
}

.input-field > input {
  width: 100%;
  display: block;
}

#login-button-container {
  text-align: center;
}

.btn2 {
  border-radius: 4px;
  position: relative;
  width: 54px;
  height: 22px;
  background-color: #3e424e;
  border: 1px solid #4d515c;
  cursor: pointer;
  text-align: center;
  line-height: 22px;
  display: inline-block;
  box-shadow: 0px 0px 5px 0px #5fb9ff;
}

/*.btn2:hover {
  box-shadow: 0px 0px 10px 0px #5fb9ff;
}

.btn2:active {
  box-shadow: 0px 0px 0px 0px #5fb9ff;
}*/
</style>

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link href="http://fonts.googleapis.com/css?family=Lato:100,400,700|Playfair+Display:400italic|Source+Code+Pro" rel="stylesheet" type="text/css">
    <title>Frost Frame</title>
    <script>if(typeof module === "object") {window.module = module; module = undefined;}</script>
    <script src="./node_modules/jquery/dist/jquery.js"></script>
  </head>
  <body>
    <div id="titlebar">
      <div id="title-text"   class="no-select">Frysta</div>
      <div id="btn-quit"     class="button"></div>
      <div id="btn-minimize" class="button"></div>
    </div>

    <div id="lioca" class="no-select">
      <div id="menu-buttons">
        <div id="menu-login"          class="menu-button" active="true">Login</div>
        <div id="menu-create-account" class="menu-button" active="false">Create Account</div>
      </div>
      <div id="menu-line-bg">
        <div id="menu-line-fg"></div>
      </div>
    </div>

    <div id="input-field-container">
      <div id="input-field-email" class="input-field">
        <span class="input-label no-select">Email address</span>
        <input value="" name="email" type="text">
      </div>
      <div id="input-field-username" class="input-field">
        <span class="input-label no-select">Username</span>
        <input value="" name="username" type="text">
      </div>
      <div id="input-field-password" class="input-field">
        <span class="input-label no-select">Password</span>
        <input value="" name="password" type="password">
      </div>
    </div>

    <div id="login-button-container">
      <div id="login" class="btn2 no-select">Submit</div>
    </div>

    <br><br><br><br><br>

    <!-- <div id="create-account" class="btn no-select">Create Account</div> -->

    <div id="buttons">
      <div id="btn-screenshot" class="btn no-select">Screenshot</div>
    </div>

    <div>
      <div>-----------------------------------------------------</div>
      <div id="url-here"></div>
      <div>-----------------------------------------------------</div>
    </div>

  </body>
</html>

<script>

$(".btn2").hover(function(){
  $(this).animate({
    "box-shadow": "0px 0px 10px 0px #5fb9ff"
  }, 200);
}, function(){
  alert("REEEEEEEEEE");
});

const ipc         = require("electron").ipcRenderer;
const EmitMessage = require("electron").remote.app.emit;

function SendMessage(func, data=null){
  EmitMessage("message", {
    "function": func,
    "data"    : JSON.stringify(data)
  });
}

// Receiving a message from main.js
ipc.on("message", (event, msg) => {
  $("#url-here").html(`<a href="${msg}">${msg}</a>`);
})

// Sending messages to main.js
$("#btn-screenshot").click(function(){
  SendMessage("TakeScreenshot");
});

$("#btn-minimize").click(function(){
  SendMessage("Minimize");
});

$("#btn-quit").click(function(){
  SendMessage("Quit");
});

$("#create-account").click(function(){
  var data = {
    "email"   : $("#form-login [name='email']").val(),
    "username": $("#form-login [name='username']").val(),
    "password": $("#form-login [name='password']").val()
  };
  SendMessage("CreateAccount", data);
});

$("#login").click(function(){
  var data = {
    "username": $("#form-login [name='username']").val(),
    "password": $("#form-login [name='password']").val()
  };
  SendMessage("Login", data);
});

$("#test-save").click(function(){
  SendMessage("TestSave");
});

$("#test-load").click(function(){
  SendMessage("TestLoad");
});

$("input").on("click",function(){
  var text = $(this).val();
  var span = $("span", $(this).parent())[0];
  if(!text)
    $(span).css("color", "rgba(0, 0, 0, 0.4)");
});

$("input").on("blur",function(){
  var text = $(this).val();
  var span = $("span", $(this).parent())[0];
  if(!text)
    $(span).css("color", "rgba(0, 0, 0, 0.7)");
});

$("input").on("input", function(){
  var text = $(this).val();
  var span = $("span", $(this).parent())[0];
  if(text)
    $(span).hide();
  else
    $(span).show();
});

$("#menu-login").click(function(){
  if($(this).attr("active") == "false"){
    $("#menu-login").attr("active", "true");
    $("#menu-create-account").attr("active", "false");

    // Animate the line
    $("#menu-line-fg").animate({
      "left": "0%"
    }, {duration: 250, queue: false});

    $("#input-field-username").animate({
      "top": "14px"
    }, {duration: 250, queue: false}, function(){});

    $("#input-field-password").animate({
      "top": "48px"
    }, {duration: 250, queue: false});

    $("#input-field-email").animate({
      "opacity": "0"
    }, {duration: 250, queue: false, complete: function(){
      $("#input-field-email").css("visibility", "hidden", "important");
    }});
  }
});

$("#menu-create-account").click(function(){
  if($(this).attr("active") == "false"){
    $("#menu-login").attr("active", "false");
    $("#menu-create-account").attr("active", "true");

    // Animate the line
    $("#menu-line-fg").animate({
      "left": "50%"
    }, {duration: 250, queue: false});

    $("#input-field-username").animate({
      "top": "30px"
    }, {duration: 250, queue: false});

    $("#input-field-password").animate({
      "top": "56px"
    }, {duration: 250, queue: false});

    $("#input-field-email").animate({
      "opacity": "1"
    }, {duration: 250, queue: false});

    $("#input-field-email").css("visibility", "visible", "important");
  }
});

</script>
